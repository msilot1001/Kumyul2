import{REST}from"@discordjs/rest";import{Routes}from"discord-api-types/v10";import*as dotenv from"dotenv";import CommandBundle from"./Commands/CommandBundle.js";import logger from"./Utils/Logger.js";dotenv.config();const commandArray=new Array;if(CommandBundle.forEach(o=>{commandArray.push(o.Builder)}),void 0!==process.env.TESTTOKEN&&void 0!==process.env.CLIENTID){logger.info(`TOKEN: ${process.env.TESTTOKEN}, CLIENTID: `+process.env.CLIENTID);const b=new REST({version:"10"}).setToken(process.env.TESTTOKEN);b.put(Routes.applicationCommands(process.env.CLIENTID),{body:commandArray}).then(()=>logger.info("Successfully registered application commands. : "+commandArray)).catch(o=>logger.error(o))}else logger.error("Env Value undefined");
var __awaiter=this&&this.__awaiter||function(o,r,v,d){return new(v=v||Promise)(function(n,t){function e(o){try{a(d.next(o))}catch(o){t(o)}}function i(o){try{a(d.throw(o))}catch(o){t(o)}}function a(o){var t;o.done?n(o.value):((t=o.value)instanceof v?t:new v(function(o){o(t)})).then(e,i)}a((d=d.apply(o,r||[])).next())})};import*as dotenv from"dotenv";import*as BotEvent from"./BotEvent/BotEvent.js";import{LoadConfig}from"./Config/ConfigManager.js";import{Connect}from"./Database/DBManager.js";import GuildAdd from"./BotEvent/GuildAdd.js";dotenv.config(),LoadConfig().then(()=>__awaiter(void 0,void 0,void 0,function*(){yield Connect();var o=BotEvent.client;o.once("ready",()=>BotEvent.Start()),o.on("messageCreate",o=>__awaiter(void 0,void 0,void 0,function*(){BotEvent.MsgRecv(o)})),o.on("interactionCreate",o=>__awaiter(void 0,void 0,void 0,function*(){BotEvent.InterAcRecv(o)})),o.on("guildCreate",o=>__awaiter(void 0,void 0,void 0,function*(){GuildAdd(o)})),o.login("production"===process.env.NODE_ENV?process.env.TOKEN:process.env.TESTTOKEN)}));
var __awaiter=this&&this.__awaiter||function(t,o,a,s){return new(a=a||Promise)(function(n,e){function i(t){try{c(s.next(t))}catch(t){e(t)}}function r(t){try{c(s.throw(t))}catch(t){e(t)}}function c(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,r)}c((s=s.apply(t,o||[])).next())})};import{Client,GatewayIntentBits,Partials,ActivityType}from"discord.js";import logger from"../Utils/Logger.js";import InterAcRecvFunc from"./InterAcRecv.js";import MsgRecvFunc from"./MsgRecv.js";const client=new Client({intents:[GatewayIntentBits.Guilds,GatewayIntentBits.GuildMessages],partials:[Partials.Channel]});function Start(){var t;return __awaiter(this,void 0,void 0,function*(){logger.info(`
${null==(t=client.user)?void 0:t.tag} (ê²€ì—´ë´‡ ì‹œë±ì´) ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!`);let e=client.ws.ping,n=void logger.info(`í˜„ì¬ ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ì˜ í•‘ì€ ${e}ms ì…ë‹ˆë‹¤.`);setInterval(()=>{var t;e=client.ws.ping,n=[{name:"ìš•ì„¤",type:ActivityType.Listening},{name:"ë‹ê²ë“¤ ëª…ë ¹",type:ActivityType.Listening},{name:"ë„ˆë‹˜ì˜ ëª…ë ¹",type:ActivityType.Listening},{name:"ìš•ì„¤ì„ ê²€ì—´",type:ActivityType.Listening},{name:"ì‹œë±ì¸ ê·€ì—¬ì›¡ ì´ë¼ê³ ",type:ActivityType.Listening},{name:"ë‹¹ì‹ ë„¤ ì„œë²„ì—ì„œ ê²€ì—´ë†€ì´",type:ActivityType.Listening},{name:""+client.guilds.cache.size,type:ActivityType.Playing},{name:client.guilds.cache.reduce((t,e)=>t+e.memberCount,0)+"ëª…ì˜ ë‹ê²ë“¤ê³¼ í•¨ê»˜",type:ActivityType.Playing}],null!=(t=client.user)&&t.setActivity(n[Math.floor(Math.random()*n.length)])},5e3)})}function MsgRecv(t){return __awaiter(this,void 0,void 0,function*(){MsgRecvFunc(t)})}function InterAcRecv(t){return __awaiter(this,void 0,void 0,function*(){InterAcRecvFunc(t)})}function ErrorInMsgProcess(t,e){return __awaiter(this,void 0,void 0,function*(){t.reply(`Error Occured While Progress 
 Error: `+e)})}export{client,Start,MsgRecv,InterAcRecv,ErrorInMsgProcess};
import{ChannelType}from"discord.js";import{embedtemp}from"../Config/EmbedConfig.js";import{GuildModel}from"../Database/GuildSchema.js";import logger from"../Utils/Logger.js";export default function GuildAdd(o){o.available&&o.channels.fetch().then(e=>{if(0!==e.size){let t=!1;e.forEach(e=>{var i;t||e.type===ChannelType.GuildText&&((i=embedtemp).setTitle("ì‹œë±ì´ë¥¼ ì´ˆëŒ€í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!").setDescription("No.1 ê´€ë¦¬ë´‡ ì‹œë±ì´!").setFields({name:"ì‹œë±ì´ ê¸°ëŠ¥",value:"/ê¸°ëŠ¥ ì„ í†µí•´ ê¸°ëŠ¥ì„ í™•ì¸í•´ë³´ì„¸ìš”!"},{name:"ë„ì›€ë§",value:"[ë„ì›€ë§](https://sojakstudio.github.io/kumyul/help) ì„ í™•ì¸í•´ë³´ì„¸ìš”!"},{name:"í–‰ë³µí•œ ì‹œë±ì´ ë¼ì´í”„ ë˜ì„¸ìš”!",value:"[ë””ìŠ¤ì½”ë“œ ê³µì‹ ì„œë²„](https://discord.gg/RGYnR3r5XC), [ê¹ƒí—ˆë¸Œ ì´ìŠˆ](https://github.com/sojakstudio/Kumyul2/issues)"}),e.send({embeds:[i]}),GuildModel.findOne({id:o.id}).exec().then(e=>{logger.info(e),null===e&&GuildModel.create({id:o.id,warnlimit:10,customdetection:"{}"})}),t=!0)})}})}
var __awaiter=this&&this.__awaiter||function(e,s,d,a){return new(d=d||Promise)(function(n,t){function o(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof d?t:new d(function(e){e(t)})).then(o,r)}i((a=a.apply(e,s||[])).next())})};import{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle}from"discord.js";import{url}from"../Config/EmbedConfig.js";import{VoteModel}from"../Database/VoteSchema.js";import logger from"../Utils/Logger.js";function InterAcButton(s){var d,a;return __awaiter(this,void 0,void 0,function*(){if(s.customId.startsWith("cdvo.")){var[e,n]=s.customId.substring(5).split("_");try{var o=yield VoteModel.findOne({id:e});if(o){let t;var r;const i=(new ActionRowBuilder).addComponents((new ButtonBuilder).setCustomId(`cdvo.${e}_agree`).setLabel("ğŸ‘").setStyle(ButtonStyle.Success),(new ButtonBuilder).setCustomId(`cdvo.${e}_disagree`).setLabel("ğŸ‘").setStyle(ButtonStyle.Danger),(new ButtonBuilder).setCustomId(`cdvo.${e}_lock`).setLabel("ğŸ”’").setStyle(ButtonStyle.Secondary));if("lock"===n)return o.maker!==s.user.id?void s.reply({content:"íˆ¬í‘œì˜ ìƒì„±ìë§Œ íˆ¬í‘œë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆì–´ìš”!",ephemeral:!0}):(yield VoteModel.deleteOne({id:e}),t=(new EmbedBuilder).setColor("#5f7b9b").setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle("[ì¢…ë£Œë¨] "+o.topic).setDescription(o.description||"ìƒˆ íˆ¬í‘œì—ìš”!").addFields({name:"ì°¬ì„±",value:""+o.agree,inline:!0},{name:"ë°˜ëŒ€",value:""+o.disagree,inline:!0}).setFooter({text:o.makername+"ë‹˜ì´ ì‹œì‘í–ˆì–´ìš”!"}),null!=(d=s.channel)&&d.messages.fetch(o.msgid).then(e=>{e.edit({embeds:[t],components:[]})}),void s.reply({content:"ì„±ê³µì ìœ¼ë¡œ íˆ¬í‘œë¥¼ ë°˜ì˜í–ˆì–´ìš”!",ephemeral:!0}));o.uservoted.has(s.user.id)&&((r=o.uservoted.get(s.user.id))&&--o.agree,r||--o.disagree),"agree"===n&&(o.agree+=1,o.save(),o.uservoted.set(s.user.id,!0)),"disagree"===n&&(o.disagree+=1,o.save(),o.uservoted.set(s.user.id,!1)),t=(new EmbedBuilder).setColor("#46b950").setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle(o.topic).setDescription(o.description||"ìƒˆ íˆ¬í‘œì—ìš”!").addFields({name:"ì°¬ì„±",value:""+o.agree,inline:!0},{name:"ë°˜ëŒ€",value:""+o.disagree,inline:!0}).setFooter({text:o.makername+"ë‹˜ì´ ì‹œì‘í–ˆì–´ìš”!"}),null!=(a=s.channel)&&a.messages.fetch(o.msgid).then(e=>{e.edit({embeds:[t],components:[i]})}),s.reply({content:"ì„±ê³µì ìœ¼ë¡œ íˆ¬í‘œë¥¼ ë°˜ì˜í–ˆì–´ìš”!",ephemeral:!0})}}catch(e){logger.error(e)}}})}export default InterAcButton;
var __awaiter=this&&this.__awaiter||function(n,r,m,u){return new(m=m||Promise)(function(e,t){function a(n){try{i(u.next(n))}catch(n){t(n)}}function o(n){try{i(u.throw(n))}catch(n){t(n)}}function i(n){var t;n.done?e(n.value):((t=n.value)instanceof m?t:new m(function(n){n(t)})).then(a,o)}i((u=u.apply(n,r||[])).next())})};import CommandBundle from"../Commands/CommandBundle.js";function InterAcCommand(t){return __awaiter(this,void 0,void 0,function*(){var n=CommandBundle.find(n=>n.Builder.name===t.commandName);n&&n.SlashExecute(t)})}export default InterAcCommand;
var __awaiter=this&&this.__awaiter||function(t,i,a,u){return new(a=a||Promise)(function(e,n){function o(t){try{c(u.next(t))}catch(t){n(t)}}function r(t){try{c(u.throw(t))}catch(t){n(t)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof a?n:new a(function(t){t(n)})).then(o,r)}c((u=u.apply(t,i||[])).next())})};import InterAcCommand from"./InterAcCommand.js";import InterAcButton from"./InterAcButton.js";function InterAcRecv(t){return __awaiter(this,void 0,void 0,function*(){t.isCommand()&&InterAcCommand(t),t.isButton()&&InterAcButton(t)})}export default InterAcRecv;
var __awaiter=this&&this.__awaiter||function(e,a,s,m){return new(s=s||Promise)(function(t,n){function o(e){try{r(m.next(e))}catch(e){n(e)}}function i(e){try{r(m.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?t(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(o,i)}r((m=m.apply(e,a||[])).next())})};import logger from"../Utils/Logger.js";import{GetConfig}from"../Config/ConfigManager.js";import CommandBundle from"../Commands/CommandBundle.js";import Parse from"../Debug/CommandParser.js";const prefix="ã…";function MsgRecv(t){var o;return __awaiter(this,void 0,void 0,function*(){if(!t.author.bot&&(logger.info(`[ ${null==(o=t.guild)?void 0:o.name} ] ${null==(o=t.member)?void 0:o.user.username}#${null==(o=t.member)?void 0:o.user.discriminator} : `+t.content),t.content.startsWith(">cdec")||Parse(t,t.content.substring(0,4).trim().split("")),t.content.startsWith(prefix))){var e=t.content.slice(prefix.length).split(/ +/);if(e){const n=null==(o=e.shift())?void 0:o.toLowerCase();logger.info("Command Detected: "+n),CommandBundle.forEach(e=>__awaiter(this,void 0,void 0,function*(){logger.info(e.Builder.name),e.Builder.name===n&&((yield GetConfig(1))||t.reply("ë´‡ ì„œë²„ ê´€ë¦¬ìê°€ ë©”ì„¸ì§€ì»¤ë§¨ë“œë¥¼ ë¹„í™œì„±í™”í–ˆì–´ìš”! ë´‡ ì„œë²„ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”!"),e.MsgExecute(t))}))}}})}export default MsgRecv;
var __awaiter=this&&this.__awaiter||function(e,r,c,u){return new(c=c||Promise)(function(o,t){function n(e){try{a(u.next(e))}catch(e){t(e)}}function i(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(n,i)}a((u=u.apply(e,r||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";const command={Builder:(new SlashCommandBuilder).setName("ê³µì§€").setDescription("ê³µì§€ ì±„ë„ì— ê³µì§€ë¥¼ ë³´ë‚´ìš”!"),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("SlashExecute")})};export default command;
var __awaiter=this&&this.__awaiter||function(e,o,s,d){return new(s=s||Promise)(function(i,t){function n(e){try{a(d.next(e))}catch(e){t(e)}}function r(e){try{a(d.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,r)}a((d=d.apply(e,o||[])).next())})};import{EmbedBuilder,SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";const command={Builder:(new SlashCommandBuilder).setName("ì°¨ë‹¨").setDescription("ì‚¬ìš©ìë¥¼ ì°¨ë‹¨í•©ë‹ˆë‹¤. (ê¸°ë³¸ëŸ‰: ì°¨ë‹¨í•´ì œ X)").addUserOption(e=>e.setName("ì‚¬ìš©ì").setDescription("ì°¨ë‹¨í•  ì‚¬ìš©ì").setRequired(!0)).addIntegerOption(e=>e.setName("ì‚­ì œë©”ì„¸ì§€").setDescription("ì‚­ì œí•  ìœ ì €ì˜ ë©”ì„¸ì§€ ê¸°ë¡").setRequired(!0).addChoices({name:"ì‚­ì œí•˜ê¸° ì•Šê¸°",value:0},{name:"ìµœê·¼ 24ì‹œê°„",value:1},{name:"ìµœê·¼ 7ì¼",value:7})).addStringOption(e=>e.setName("ì‚¬ìœ ").setDescription("ìœ ì €ë¥¼ ì°¨ë‹¨í•  ì‚¬ìœ ")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:r=>__awaiter(void 0,void 0,void 0,function*(){var e;if(r.guild&&r.member)if((null==(t=r.member)?void 0:t.permissions).toArray().includes("BanMembers")){var t=r.options.getUser("ì‚¬ìš©ì");logger.info(t);const i=r.options.getString("ì‚¬ìœ "),n=r.options.getInteger("ë©”ì„¸ì§€ ì‚­ì œ");null!=(e=r.guild)&&e.members.fetch({user:t}).then(t=>{(i?t.ban({deleteMessageDays:n,reason:i}).then(()=>__awaiter(void 0,void 0,void 0,function*(){var e=(new EmbedBuilder).setColor("#CB7ACF").setTitle(`${t.user.username}#${t.user.discriminator}ë‹˜ì„ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤`).setDescription("ìœ ì €ê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.").addFields([{name:"ì‚¬ìœ ",value:`\`\`\`${i}\`\`\``},{name:"ë©”ì„¸ì§€ ì‚­ì œ ê¸°í•œ",value:""+n}]).setTimestamp();yield r.reply({embeds:[e]})})):t.ban({deleteMessageDays:n}).then(()=>__awaiter(void 0,void 0,void 0,function*(){var e=(new EmbedBuilder).setColor("#CB7ACF").setTitle(`${t.user.username}#${t.user.discriminator}ë‹˜ì„ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤`).setDescription("ìœ ì €ê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.").addFields([{name:"ë©”ì„¸ì§€ ì‚­ì œ ê¸°í•œ",value:""+n}]).setTimestamp();yield r.reply({embeds:[e]})}))).catch(()=>{r.reply({content:"ì‹¤í–‰ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”!",ephemeral:!0})})}).catch(e=>{r.reply({content:"Unvaild User Provided, Error: "+e,ephemeral:!0})})}else r.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì°¨ë‹¨í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
import Ban from"./Ban.js";import Help from"./Help.js";import Kick from"./Kick.js";import LimitCheck from"./LimitCheck.js";import LimitSet from"./LimitSet.js";import Vote from"./Vote.js";import WarnAdd from"./WarnAdd.js";import WarnCheck from"./WarnCheck.js";import WarnRemove from"./WarnRemove.js";import WarnReset from"./WarnReset.js";import WarnSet from"./WarnSet.js";import ServerConfig from"./ServerConfig.js";const CommandBundle=[Ban,Help,Kick,LimitCheck,LimitSet,Vote,WarnAdd,WarnCheck,WarnRemove,WarnReset,WarnSet,ServerConfig];export default CommandBundle;
var __awaiter=this&&this.__awaiter||function(e,r,c,u){return new(c=c||Promise)(function(t,o){function n(e){try{a(u.next(e))}catch(e){o(e)}}function i(e){try{a(u.throw(e))}catch(e){o(e)}}function a(e){var o;e.done?t(e.value):((o=e.value)instanceof c?o:new c(function(e){e(o)})).then(n,i)}a((u=u.apply(e,r||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";const command={Builder:(new SlashCommandBuilder).setName("ë„ì›€ë§").setDescription("ëª…ë ¹ì–´ì— ëŒ€í•œ ë„ì›€ë§ì„ ì¶œë ¥í•©ë‹ˆë‹¤."),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("SlashExecute"),e.reply("Help Command")})};export default command;
var __awaiter=this&&this.__awaiter||function(e,s,a,d){return new(a=a||Promise)(function(t,i){function r(e){try{o(d.next(e))}catch(e){i(e)}}function n(e){try{o(d.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof a?i:new a(function(e){e(i)})).then(r,n)}o((d=d.apply(e,s||[])).next())})};import{EmbedBuilder,SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";const command={Builder:(new SlashCommandBuilder).setName("ì¶”ë°©").setDescription("ì‚¬ìš©ìë¥¼ ì¶”ë°©í•©ë‹ˆë‹¤.").addUserOption(e=>e.setName("ì‚¬ìš©ì").setDescription("ì¶”ë°©í•  ì‚¬ìš©ì").setRequired(!0)).addStringOption(e=>e.setName("ì‚¬ìœ ").setDescription("ìœ ì €ë¥¼ ì¶”ë°©í•  ì‚¬ìœ ")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:r=>__awaiter(void 0,void 0,void 0,function*(){var e;if((null==(i=r.member)?void 0:i.permissions).toArray().includes("KickMembers")){var i=yield r.options.getUser("ì‚¬ìš©ì");const t=yield r.options.getString("ì‚¬ìœ ");null!=(e=r.guild)&&e.members.fetch(i.id).then(i=>__awaiter(void 0,void 0,void 0,function*(){(null===t?i.kick().then(()=>__awaiter(void 0,void 0,void 0,function*(){var e=(new EmbedBuilder).setColor("#CB7ACF").setTitle(`${i.user.username}#${i.user.discriminator}ë‹˜ì„ ì¶”ë°©í–ˆìŠµë‹ˆë‹¤`).setDescription("ìœ ì €ê°€ ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤.").addFields([{name:"ì‚¬ìœ ",value:"ì—†ì"}]).setTimestamp();yield r.reply({embeds:[e]})})):i.kick().then(()=>__awaiter(void 0,void 0,void 0,function*(){var e=(new EmbedBuilder).setColor("#CB7ACF").setTitle(`${i.user.username}#${i.user.discriminator}ë‹˜ì„ ì¶”ë°©í–ˆìŠµë‹ˆë‹¤`).setDescription("ìœ ì €ê°€ ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤.").addFields([{name:"ì‚¬ìœ ",value:`\`\`\`${t}\`\`\``}]).setTimestamp();yield r.reply({embeds:[e]})}))).catch(()=>{r.reply({content:"ì‹¤í–‰ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”! ì €ëŸ°...",ephemeral:!0})})})).catch(e=>{r.reply({content:"Unvaild User Provided, Error: "+e,ephemeral:!0})})}else r.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì¶”ë°©í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
var __awaiter=this&&this.__awaiter||function(e,a,l,d){return new(l=l||Promise)(function(i,t){function n(e){try{r(d.next(e))}catch(e){t(e)}}function o(e){try{r(d.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}r((d=d.apply(e,a||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";const command={Builder:(new SlashCommandBuilder).setName("í•œë„í™•ì¸").setDescription("ì´ ì„œë²„ì˜ ê²½ê³ í•œë„ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤."),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:t=>__awaiter(void 0,void 0,void 0,function*(){t.guild||t.reply({content:"ì–´í—ˆ ê¸¸ë“œ ì•ˆì—ì„œë§Œ ì´ ì»¤ë§¨ë“œë¥¼ ì“¸ ìˆ˜ ìˆë‹µë‹ˆë‹¤! ì¹œêµ¬!",ephemeral:!0});try{logger.info("find");var e=yield GuildModel.findOne({id:t.guild.id});e?t.reply(`ì´ ì„œë²„ì˜ í•œë„ëŠ” ${e.warnlimit}ì´ì—ìš”!`):t.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){t.reply({content:"ì²˜ë¦¬ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!",ephemeral:!0})}})};export default command;
var __awaiter=this&&this.__awaiter||function(e,l,d,a){return new(d=d||Promise)(function(t,i){function n(e){try{r(a.next(e))}catch(e){i(e)}}function o(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){var i;e.done?t(e.value):((i=e.value)instanceof d?i:new d(function(e){e(i)})).then(n,o)}r((a=a.apply(e,l||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";const command={Builder:(new SlashCommandBuilder).setName("í•œë„ì„¤ì •").setDescription("ì´ ì„œë²„ì˜ í•œë„ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.").addIntegerOption(e=>e.setName("í•œë„").setDescription("ì´ ì„œë²„ì˜ ë°”ê¿€ ê²½ê³  í•œë„").setRequired(!0)),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:o=>__awaiter(void 0,void 0,void 0,function*(){var e,i,t,n=o.options.getInteger("í•œë„");if(n<=0)o.reply({content:"ê²½ê³  í•œë„ë¥¼ 0 ì´í•˜ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ì–´ìš”! ê²½ê³ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•˜ë ¤ë©´ /ì„œë²„ì„¤ì • ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”!",ephemeral:!0});else if(o.guild)if((null==(e=o.member)?void 0:e.permissions).toArray().includes("ManageGuild"))try{(yield GuildModel.findOne({id:null==(i=o.guild)?void 0:i.id}))?(yield GuildModel.updateOne({id:null==(t=o.guild)?void 0:t.id},{warnlimit:n}),o.reply("ì„±ê³µì ìœ¼ë¡œ í•œë„ë¥¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤!, ë³€ê²½ëœ í•œë„: "+n)):o.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}else o.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ì„œë²„ ê´€ë¦¬ ê¸°ëŠ¥ì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
var __awaiter=this&&this.__awaiter||function(e,r,l,a){return new(l=l||Promise)(function(o,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function i(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,i)}s((a=a.apply(e,r||[])).next())})};import{SlashCommandBuilder,ButtonStyle,ComponentType,ActionRowBuilder,ButtonBuilder,EmbedBuilder}from"discord.js";import{v1}from"uuid";import logger from"../Utils/Logger.js";import{color,url}from"../Config/EmbedConfig.js";import{GuildModel}from"../Database/GuildSchema.js";import MainPage from"../ConfigAssets/MainPage.js";import OrdinaryPage from"../ConfigAssets/OrdinaryPage.js";import InOutPage from"../ConfigAssets/InOutPage.js";import BotAutoRoleConfig from"../ConfigAssets/BotAutoRoleConfig.js";import InMsgConfig from"../ConfigAssets/InMsgConfig.js";import UserAutoRoleConfig from"../ConfigAssets/UserAutoRoleConfig.js";import SysChConfig from"../ConfigAssets/SysChConfig.js";import OutMsgConfig from"../ConfigAssets/OutMsgConfig.js";const PageTemplate=(e,t)=>{return{name:"main",embed:(new EmbedBuilder).setColor(color).setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle(e.guild.name+"ì˜ ì„œë²„ ì„¤ì •").setDescription("ë°”ê¾¸ê³  ì‹¶ì€ ì„¤ì • ì°½ì„ ì—´ì–´ì£¼ì„¸ìš”.").addFields({name:"ì¼ë°˜ ì„¤ì •",value:"ê¸°ë³¸ì ì¸ ê´€ë¦¬ ì„¤ì •"},{name:"ì…/í‡´ì¥ ì„¤ì •",value:"ì…/í‡´ì¥ ë©”ì„¸ì§€ ì„¤ì •"},{name:"ê²½ê³  ì„¤ì •",value:"ê²½ê³  ê´€ë ¨ ì„¤ì •"},{name:"ê³µì§€ ì„¤ì •",value:"ê³µì§€ ê´€ë ¨ ì„¤ì •"},{name:"ë ˆë²¨ë§ ì„¤ì •",value:"ë ˆë²¨ë§ ì‹œìŠ¤í…œ ì„¤ì •"},{name:"í‹°ì¼“ ì„¤ì •",value:"í‹°ì¼“ ê´€ë ¨ ì„¤ì •"},{name:"ë©¤ë²„ ì„¤ì •",value:"ë©¤ë²„ ê´€ë¦¬ ì„¤ì •"}),components:[(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ì¼ë°˜ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.ordinary`),(new ButtonBuilder).setLabel("ì…/í‡´ì¥ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.inout`),(new ButtonBuilder).setLabel("ê²½ê³  ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.warn`),(new ButtonBuilder).setLabel("ê³µì§€ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.notice`),(new ButtonBuilder).setLabel("ë ˆë²¨ë§ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.level`)),(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("í‹°ì¼“ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.ticket`),(new ButtonBuilder).setLabel("ë©¤ë²„ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.member`))]}},PageList=new Map,ExecuteList=(PageList.set("main",MainPage),PageList.set("ordinary",OrdinaryPage),PageList.set("inout",InOutPage),new Map),command=(ExecuteList.set("syschconfig",SysChConfig),ExecuteList.set("userroleconfig",UserAutoRoleConfig),ExecuteList.set("botroleconfig",BotAutoRoleConfig),ExecuteList.set("inmsgconfig",InMsgConfig),ExecuteList.set("outmsgconfig",OutMsgConfig),{Builder:(new SlashCommandBuilder).setName("ì„œë²„ì„¤ì •").setDescription("ì„œë²„ì˜ ì„¤ì •ì„ ë³€ê²½í•©ë‹ˆë‹¤."),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:t=>__awaiter(void 0,void 0,void 0,function*(){const i=t.channel;var e=t.guild;if(e&&i){const s=v1();if(logger.info(s),yield GuildModel.findOne({id:e.id})){e=PageList.get("main");let n;e&&(n=yield t.reply({embeds:[(yield e(t,s)).embed],components:(yield e(t,s)).components,fetchReply:!0}));const r=`cdec.${s}.config.`;t.channel.createMessageComponentCollector({filter:e=>e.customId.startsWith(r)&&e.user.id===t.user.id,componentType:ComponentType.Button}).on("collect",o=>__awaiter(void 0,void 0,void 0,function*(){var e,t=o.customId.substring(r.length);logger.info(t),t.startsWith("execute")?(e=t.substring(8),ExecuteList.has(e)?(e=ExecuteList.get(e))&&(n&&(yield n.delete()),e=yield e(o,s),logger.info("send execute end page"),n=yield i.send({embeds:[(yield e(o,s)).embed],components:(yield e(o,s)).components})):logger.info("Page Not Found 404")):(e=PageList.get(t))?(n&&(yield n.delete()),logger.info("send return page"),n=yield o.reply({embeds:[(yield e(o,s)).embed],components:(yield e(o,s)).components,fetchReply:!0})):logger.info("Page Not Found 404")}))}else t.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}})});export default command;export{PageList,ExecuteList};
var __awaiter=this&&this.__awaiter||function(e,s,a,d){return new(a=a||Promise)(function(o,t){function i(e){try{r(d.next(e))}catch(e){t(e)}}function n(e){try{r(d.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}r((d=d.apply(e,s||[])).next())})};import{ActionRowBuilder,ButtonBuilder,EmbedBuilder,SlashCommandBuilder,ButtonStyle}from"discord.js";import{v4}from"uuid";import logger from"../Utils/Logger.js";import{VoteModel}from"../Database/VoteSchema.js";import{url}from"../Config/EmbedConfig.js";const command={Builder:(new SlashCommandBuilder).setName("íˆ¬í‘œ").setDescription("ì°¬ë°˜íˆ¬í‘œë¥¼ ê°œì„¤í•©ë‹ˆë‹¤.").addStringOption(e=>e.setName("ì£¼ì œ").setDescription("íˆ¬í‘œì˜ ì£¼ì œ").setRequired(!0)).addStringOption(e=>e.setName("ì„¤ëª…").setDescription("íˆ¬í‘œì˜ ì„¤ëª…")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:s=>__awaiter(void 0,void 0,void 0,function*(){if(s.guild&&s.member){var e=s.options.getString("ì£¼ì œ"),t=s.options.getString("ì„¤ëª…");if(e)if((null==(o=s.member)?void 0:o.permissions).toArray().includes("ManageGuild")){var o=""+v4();try{var i=(new EmbedBuilder).setColor("#46b950").setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle(e).setDescription(t||"ìƒˆ íˆ¬í‘œì—ìš”!").addFields({name:"ì°¬ì„±",value:"0",inline:!0},{name:"ë°˜ëŒ€",value:"0",inline:!0}).setFooter({text:`${s.user.username}#${s.user.discriminator}ë‹˜ì´ ì‹œì‘í–ˆì–´ìš”!`}),n=(new ActionRowBuilder).addComponents((new ButtonBuilder).setCustomId(`cdvo.${o}_agree`).setLabel("ğŸ‘").setStyle(ButtonStyle.Success),(new ButtonBuilder).setCustomId(`cdvo.${o}_disagree`).setLabel("ğŸ‘").setStyle(ButtonStyle.Danger),(new ButtonBuilder).setCustomId(`cdvo.${o}_lock`).setLabel("ğŸ”’").setStyle(ButtonStyle.Secondary)),r=yield s.channel.send({embeds:[i],components:[n]});yield VoteModel.create({id:o,topic:e,msgid:r.id,description:t||null,agree:0,disagree:0,uservoted:new Map,maker:s.user.id,makername:s.user.username+"#"+s.user.discriminator}),s.reply({content:"ì„±ê³µì ìœ¼ë¡œ íˆ¬í‘œë¥¼ ìƒì„±í–ˆì–´ìš”!",ephemeral:!0})}catch(e){logger.error(e)}}else s.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ì„œë²„ ê´€ë¦¬í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})}})};export default command;
var __awaiter=this&&this.__awaiter||function(e,d,a,s){return new(a=a||Promise)(function(t,i){function r(e){try{o(s.next(e))}catch(e){i(e)}}function n(e){try{o(s.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof a?i:new a(function(e){e(i)})).then(r,n)}o((s=s.apply(e,d||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";import{embedtemp}from"../Config/EmbedConfig.js";const command={Builder:(new SlashCommandBuilder).setName("ê²½ê³ ").setDescription("ì‚¬ìš©ìì—ê²Œ ê²½ê³ ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤. (ê¸°ë³¸ëŸ‰: 1)").addUserOption(e=>e.setName("ìœ ì €").setDescription("ê²½ê³ ë¥¼ ë¶€ì—¬í•  ìœ ì €").setRequired(!0)).addIntegerOption(e=>e.setName("ê²½ê³ ìˆ˜").setDescription("ì¶”ê°€í•  ê²½ê³ ìˆ˜")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:s=>__awaiter(void 0,void 0,void 0,function*(){var e,t=s.options.getUser("ìœ ì €"),r=s.options.getInteger("ê²½ê³ ìˆ˜");if(t||s.reply({content:"ê²½ê³ ë¥¼ ë¶€ì—¬í•  ìœ ì €ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”!",ephemeral:!0}),s.guild)if((null==(e=s.member)?void 0:e.permissions).toArray().includes("BanMembers"))try{var n=yield GuildModel.findOne({id:s.guild.id});if(n){var o=JSON.parse(n.userwarns);let i=!1;for(let e=0;e<o.length;e++)o[e].id===t.id&&(i=!0,o[e].warn+=r||1);i||o.push({id:t.id,warn:r||1});var d=JSON.stringify(o),a=(yield GuildModel.updateOne({id:s.guild.id},{userwarns:d}),embedtemp.setTitle("âœ… ê²½ê³ ê°€ ë¶€ì—¬ë¨").setDescription(`<@${t.id}>ì—ê²Œ ${r||1}ë§Œí¼ì˜ ê²½ê³ ë¥¼ ë¶€ì—¬í•¨`));s.reply({embeds:[a]})}else s.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}else s.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì°¨ë‹¨í•˜ê¸°/ì¶”ë°©í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
var __awaiter=this&&this.__awaiter||function(e,a,d,s){return new(d=d||Promise)(function(t,i){function r(e){try{n(s.next(e))}catch(e){i(e)}}function o(e){try{n(s.throw(e))}catch(e){i(e)}}function n(e){var i;e.done?t(e.value):((i=e.value)instanceof d?i:new d(function(e){e(i)})).then(r,o)}n((s=s.apply(e,a||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";import{embedtemp}from"../Config/EmbedConfig.js";const command={Builder:(new SlashCommandBuilder).setName("ê²½ê³ í™•ì¸").setDescription("ì‚¬ìš©ìì˜ ê²½ê³ ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. (ê¸°ë³¸: ìê¸°ìì‹ )").addUserOption(e=>e.setName("ëŒ€ìƒ").setDescription("ê²½ê³ ë¥¼ í™•ì¸í•  ëŒ€ìƒ")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:n=>__awaiter(void 0,void 0,void 0,function*(){var t=n.options.getUser("ëŒ€ìƒ")||n.user;if(n.guild)try{var e=yield GuildModel.findOne({id:n.guild.id});if(e){let i=0;var r=JSON.parse(e.userwarns);for(let e=0;e<r.length;e++)r[e].id===t.id&&(i=r[e].warn);var o=embedtemp.setTitle(`@${t.username}#${t.discriminator}ì˜ ê²½ê³ ìˆ˜`).setDescription(i+"ê°œ");n.reply({embeds:[o]})}else n.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}})};export default command;
var __awaiter=this&&this.__awaiter||function(e,a,d,s){return new(d=d||Promise)(function(t,i){function r(e){try{o(s.next(e))}catch(e){i(e)}}function n(e){try{o(s.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof d?i:new d(function(e){e(i)})).then(r,n)}o((s=s.apply(e,a||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{embedtemp}from"../Config/EmbedConfig.js";import{GuildModel}from"../Database/GuildSchema.js";const command={Builder:(new SlashCommandBuilder).setName("ê²½ê³ ì°¨ê°").setDescription("ì‚¬ìš©ìì˜ ê²½ê³ ë¥¼ ì°¨ê°í•©ë‹ˆë‹¤. (ê¸°ë³¸ëŸ‰: 1) (ê¸°ë³¸: ìê¸°ìì‹ )").addUserOption(e=>e.setName("ìœ ì €").setDescription("ê²½ê³ ë¥¼ ì°¨ê°í•  ìœ ì €").setRequired(!0)).addIntegerOption(e=>e.setName("ê²½ê³ ìˆ˜").setDescription("ì°¨ê°í•  ê²½ê³ ìˆ˜")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:m=>__awaiter(void 0,void 0,void 0,function*(){var e,n=m.options.getUser("ìœ ì €")||m.user,o=m.options.getInteger("ê²½ê³ ìˆ˜")||1;if(m.guild)if((null==(e=m.member)?void 0:e.permissions).toArray().includes("BanMembers"))try{var a=yield GuildModel.findOne({id:m.guild.id});if(a){var d=JSON.parse(a.userwarns);let i=!1,t=0,r=0;for(let e=0;e<d.length;e++)d[e].id===n.id&&(i=!0,t=d[e].warn,d[e].warn-=d[e].warn>=o?o:d[e].warn,r=d[e].warn);i||d.push({id:n.id,warn:0});var s=JSON.stringify(d),l=(yield GuildModel.updateOne({id:m.guild.id},{userwarns:s}),embedtemp.setTitle("âœ… ê²½ê³ ê°€ ì œê±°ë¨").setDescription(`<@${n.id}>ì˜ ê²½ê³ : ${t||0} -> `+(r||0)));m.reply({embeds:[l]})}else m.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}else m.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì°¨ë‹¨í•˜ê¸°/ì¶”ë°©í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
var __awaiter=this&&this.__awaiter||function(e,d,a,s){return new(a=a||Promise)(function(t,i){function r(e){try{o(s.next(e))}catch(e){i(e)}}function n(e){try{o(s.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof a?i:new a(function(e){e(i)})).then(r,n)}o((s=s.apply(e,d||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";import{embedtemp}from"../Config/EmbedConfig.js";const command={Builder:(new SlashCommandBuilder).setName("ê²½ê³ ì´ˆê¸°í™”").setDescription("ì‚¬ìš©ìì˜ ê²½ê³ ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤ (ê¸°ë³¸: ìê¸°ìì‹ )").addUserOption(e=>e.setName("ëŒ€ìƒ").setDescription("ê²½ê³ ë¥¼ ì´ˆê¸°í™”í•  ìœ ì €")),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:a=>__awaiter(void 0,void 0,void 0,function*(){var e,t=a.options.getUser("ëŒ€ìƒ")||a.user;if(a.guild)if((null==(e=a.member)?void 0:e.permissions).toArray().includes("BanMembers"))try{var r=yield GuildModel.findOne({id:a.guild.id});if(r){var n=JSON.parse(r.userwarns);let i=!1;for(let e=0;e<n.length;e++)n[e].id===t.id&&(i=!0,n[e].warn=0);i||n.push({id:t.id,warn:0});var o=JSON.stringify(n),d=(yield GuildModel.updateOne({id:a.guild.id},{userwarns:o}),embedtemp.setTitle("âœ… ê²½ê³ ê°€ ì´ˆê¸°í™”ë¨").setDescription(`<@${t.id}>ì˜ ê²½ê³ ë¥¼ ì´ˆê¸°í™”í•¨`));a.reply({embeds:[d]})}else a.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}else a.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì°¨ë‹¨í•˜ê¸°/ì¶”ë°©í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
var __awaiter=this&&this.__awaiter||function(e,d,s,a){return new(s=s||Promise)(function(t,i){function r(e){try{o(a.next(e))}catch(e){i(e)}}function n(e){try{o(a.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(e){e(i)})).then(r,n)}o((a=a.apply(e,d||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";import{GuildModel}from"../Database/GuildSchema.js";import{embedtemp}from"../Config/EmbedConfig.js";const command={Builder:(new SlashCommandBuilder).setName("ê²½ê³ ì§€ì •").setDescription("ì‚¬ìš©ìì˜ ê²½ê³ ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. (ê¸°ë³¸: ìê¸°ìì‹ )").addUserOption(e=>e.setName("ìœ ì €").setDescription("ê²½ê³ ë¥¼ ë¶€ì—¬í•  ìœ ì €").setRequired(!0)).addIntegerOption(e=>e.setName("ê²½ê³ ìˆ˜").setDescription("ì„¤ì •í•  ê²½ê³ ìˆ˜").setRequired(!0)),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:a=>__awaiter(void 0,void 0,void 0,function*(){var e,t=a.options.getUser("ìœ ì €"),r=a.options.getInteger("ê²½ê³ ìˆ˜");if(t||a.reply({content:"ê²½ê³ ë¥¼ ë¶€ì—¬í•  ìœ ì €ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”!",ephemeral:!0}),a.guild)if((null==(e=a.member)?void 0:e.permissions).toArray().includes("BanMembers"))try{var n=yield GuildModel.findOne({id:a.guild.id});if(n){var o=JSON.parse(n.userwarns);let i=!1;for(let e=0;e<o.length;e++)o[e].id===t.id&&(i=!0,o[e].warn=r);i||o.push({id:t.id,warn:r});var d=JSON.stringify(o),s=(yield GuildModel.updateOne({id:a.guild.id},{userwarns:d}),embedtemp.setTitle("âœ… ê²½ê³ ê°€ ì„¤ì •ë¨").setDescription(`<@${t.id}>ì˜ ê²½ê³ ë¥¼ ${r||1}ë¡œ ì„¤ì •í•¨`));a.reply({embeds:[s]})}else a.reply({content:"ì´ ê¸¸ë“œëŠ” ì‹œë±ì´ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ìˆì§€ ì•Šì•„ìš”! ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•´ë³´ì„¸ìš”!",ephemeral:!0})}catch(e){logger.error(e)}else a.reply({content:"ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë©¤ë²„ ì°¨ë‹¨í•˜ê¸°/ì¶”ë°©í•˜ê¸° ê¶Œí•œì´ í•„ìš”í•´ìš”!",ephemeral:!0})})};export default command;
const BotConfig={enableMessageCommand:!1};export default BotConfig;
var __awaiter=this&&this.__awaiter||function(o,a,s,f){return new(s=s||Promise)(function(e,r){function n(o){try{i(f.next(o))}catch(o){r(o)}}function t(o){try{i(f.throw(o))}catch(o){r(o)}}function i(o){var r;o.done?e(o.value):((r=o.value)instanceof s?r:new s(function(o){o(r)})).then(n,t)}i((f=f.apply(o,a||[])).next())})};import BotConfigFile from"./BotConfig.js";class UnvalidBotConfigError extends Error{constructor(o){super(o),this.name="UnvalidBotConfigError",Object.setPrototypeOf(this,UnvalidBotConfigError.prototype)}}class PropertyRequiredError extends UnvalidBotConfigError{constructor(o){super("Property undefined or empty: "+o),this.name="PropertyRequiredError",this.property=o}}const LoadConfig=()=>new Promise((o,r)=>{void 0!==BotConfigFile.enableMessageCommand&&null!==BotConfigFile.enableMessageCommand||r(new PropertyRequiredError("enableMessageCommand")),o(BotConfigFile)});function GetConfig(r){return __awaiter(this,void 0,void 0,function*(){var o=yield LoadConfig();if(1===r)return o.enableMessageCommand})}export{UnvalidBotConfigError,PropertyRequiredError,LoadConfig,GetConfig};
import{EmbedBuilder}from"discord.js";const color="#ffb2d8",url="https://camo.githubusercontent.com/50aa07739a9c9ac136e0ffe79c285cbb482bc435f6e387586d11dfe3a34e4698/68747470733a2f2f63646e2e646973636f72646170702e636f6d2f6174746163686d656e74732f3933383734353536363634373730353639302f3936363436393530323639323930303837342f616239616337616436626531616337332e6a706567",embedtemp=(new EmbedBuilder).setColor(color).setAuthor({name:"ì‹œë±ì´",iconURL:url});export{color,url,embedtemp};
var __awaiter=this&&this.__awaiter||function(e,d,a,u){return new(a=a||Promise)(function(n,t){function o(e){try{l(u.next(e))}catch(e){t(e)}}function i(e){try{l(u.throw(e))}catch(e){t(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,i)}l((u=u.apply(e,d||[])).next())})};import{GuildModel}from"../Database/GuildSchema.js";import InOutPage from"./InOutPage.js";const BotAutoRoleConfig=(t,e)=>new Promise((d,e)=>__awaiter(void 0,void 0,void 0,function*(){var e;const o=InOutPage;const i=null==(e=t.channel)?void 0:e.createMessageCollector({filter:e=>e.author.id===t.user.id,time:6e4}),l=yield null==(e=t.channel)?void 0:e.send("> ì œí•œì‹œê°„ 60ì´ˆ ì•ˆì— ìë™ìœ¼ë¡œ ë´‡ì—ê²Œ ë¶€ì—¬í•  ì—­í• ì„ ë©˜ì…˜í•´ì£¼ì„¸ìš”. ì…ë ¥ ì·¨ì†ŒëŠ” `ã…ì·¨ì†Œ`ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");i.on("collect",n=>__awaiter(void 0,void 0,void 0,function*(){var e,t;"ã…ì·¨ì†Œ"===n.content?l&&(yield l.delete(),d(o)):n.content.startsWith("<@&")&&(e=n.content.substring(3,n.content.length-1),t=yield null==(t=n.guild)?void 0:t.roles.fetch(e))?(yield GuildModel.updateOne({id:n.guild.id},{botautorole:t.id}),l&&(yield l.delete()),yield n.delete(),yield n.channel.send(`ì„±ê³µì ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë´‡ì—ê²Œ ë¶€ì—¬í•  ì—­í• ì„ <@&${t.id}>ìœ¼ë¡œ ë°”ê¿¨ì–´ìš”!`),null!==i&&void 0!==i&&i.stop(),d(o)):n.channel.send("ì…ë ¥ì´ ì˜ëª»ë˜ì—ˆì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!")}))}));export default BotAutoRoleConfig;
var __awaiter=this&&this.__awaiter||function(e,r,a,d){return new(a=a||Promise)(function(o,t){function n(e){try{l(d.next(e))}catch(e){t(e)}}function i(e){try{l(d.throw(e))}catch(e){t(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,i)}l((d=d.apply(e,r||[])).next())})};import{ActionRowBuilder,ComponentType,ModalBuilder,TextInputBuilder,TextInputStyle,InteractionCollector,InteractionType}from"discord.js";import InOutPage from"./InOutPage.js";import{client}from"../BotEvent/BotEvent.js";import logger from"../Utils/Logger.js";function parseString(e,t){e.replace(/\${usermention}/,"<@"+t.user.id),e.replace(/\${guildname}/,""+(null==(e=t.guild)?void 0:e.name))}const InMsgConfig=(a,d)=>new Promise((r,e)=>__awaiter(void 0,void 0,void 0,function*(){const i=InOutPage;var e=(new ModalBuilder).setCustomId("cmodal."+d).setTitle("ì…ì¥ ë©”ì‹œì§€ ì„¤ì •"),t=(new TextInputBuilder).setCustomId(`cmodal.${d}.title`).setLabel("ì œëª©").setStyle(TextInputStyle.Short),o=(new TextInputBuilder).setCustomId(`cmodal.${d}.desc`).setLabel("ì„¤ëª…").setStyle(TextInputStyle.Paragraph),t=(new ActionRowBuilder).addComponents(t),o=(new ActionRowBuilder).addComponents(o);e.addComponents(t,o),a.showModal(e);const l=new InteractionCollector(client,{guild:a.guild,interactionType:InteractionType.ModalSubmit});l.filter=e=>e.user.id===a.user.id,l.on("collect",e=>{if(e.customId==="cmodal."+d){var t=e.fields.getTextInputValue(`cmodal.${d}.title`),o=e.fields.getTextInputValue(`cmodal.${d}.desc`);logger.info(`modal title:${t}, desc: `+o),e.reply(`modal title:${t}, desc: `+o),l.stop();const n=`cdec.${d}.config.`;a.channel.createMessageComponentCollector({filter:e=>e.customId.startsWith(n)&&e.user.id===a.user.id,componentType:ComponentType.Button});r(i)}})}));export default InMsgConfig;
var __awaiter=this&&this.__awaiter||function(e,u,d,r){return new(d=d||Promise)(function(o,t){function n(e){try{l(r.next(e))}catch(e){t(e)}}function i(e){try{l(r.throw(e))}catch(e){t(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof d?t:new d(function(e){e(t)})).then(n,i)}l((r=r.apply(e,u||[])).next())})};import{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle}from"discord.js";import{color,url}from"../Config/EmbedConfig.js";import{GuildModel}from"../Database/GuildSchema.js";const InOutPage=(u,d)=>__awaiter(void 0,void 0,void 0,function*(){var e,t=yield GuildModel.findOne({id:u.guild.id}),o=null==t?void 0:t.userautorole,n=null==t?void 0:t.botautorole;let i,l;return o&&(i=yield null==(e=u.guild)?void 0:e.roles.fetch(o)),n&&(l=yield null==(e=u.guild)?void 0:e.roles.fetch(n)),{name:"inout",embed:(new EmbedBuilder).setColor(color).setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle("ì…/í‡´ì¥ ì„¤ì •").setDescription("ì…/í‡´ì¥ ê´€ë ¨ ì„¤ì • ëª©ë¡ì…ë‹ˆë‹¤.").addFields({name:"ìœ ì € ìë™ ì—­í• ",value:i?`<@&${null===i||void 0===i?void 0:i.id}>`:"ë¯¸ì •"},{name:"ë´‡ ìë™ ì—­í• ",value:l?`<@&${null===l||void 0===l?void 0:l.id}>`:"ë¯¸ì •"},{name:"ì…ì¥ ë©”ì„¸ì§€",value:(null==t?void 0:t.inmsg)||"ë¯¸ì •"},{name:"í‡´ì¥ ë©”ì„¸ì§€",value:(null==t?void 0:t.outmsg)||"ë¯¸ì •"}),components:[(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ìœ ì € ìë™ ì—­í•  ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${d}.config.execute.userroleconfig`),(new ButtonBuilder).setLabel("ë´‡ ìë™ ì—­í•  ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${d}.config.execute.botroleconfig`),(new ButtonBuilder).setLabel("ì…ì¥ ë©”ì„¸ì§€ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${d}.config.execute.inmsgconfig`),(new ButtonBuilder).setLabel("í‡´ì¥ ë©”ì„¸ì§€ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${d}.config.execute.outmsgconfig`)),(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ë’¤ë¡œê°€ê¸°").setStyle(ButtonStyle.Danger).setCustomId(`cdec.${d}.config.main`))]}});export default InOutPage;
var __awaiter=this&&this.__awaiter||function(e,r,a,l){return new(a=a||Promise)(function(n,t){function o(e){try{u(l.next(e))}catch(e){t(e)}}function i(e){try{u(l.throw(e))}catch(e){t(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,i)}u((l=l.apply(e,r||[])).next())})};import{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle}from"discord.js";import{color,url}from"../Config/EmbedConfig.js";const MainPage=(e,t)=>__awaiter(void 0,void 0,void 0,function*(){return{name:"main",embed:(new EmbedBuilder).setColor(color).setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle(e.guild.name+"ì˜ ì„œë²„ ì„¤ì •").setDescription("ë°”ê¾¸ê³  ì‹¶ì€ ì„¤ì • ì°½ì„ ì—´ì–´ì£¼ì„¸ìš”.").addFields({name:"ì¼ë°˜ ì„¤ì •",value:"ê¸°ë³¸ì ì¸ ê´€ë¦¬ ì„¤ì •"},{name:"ì…/í‡´ì¥ ì„¤ì •",value:"ì…/í‡´ì¥ ë©”ì„¸ì§€ ì„¤ì •"},{name:"ê²½ê³  ì„¤ì •",value:"ê²½ê³  ê´€ë ¨ ì„¤ì •"},{name:"ê³µì§€ ì„¤ì •",value:"ê³µì§€ ê´€ë ¨ ì„¤ì •"},{name:"ë ˆë²¨ë§ ì„¤ì •",value:"ë ˆë²¨ë§ ì‹œìŠ¤í…œ ì„¤ì •"},{name:"í‹°ì¼“ ì„¤ì •",value:"í‹°ì¼“ ê´€ë ¨ ì„¤ì •"},{name:"ë©¤ë²„ ì„¤ì •",value:"ë©¤ë²„ ê´€ë¦¬ ì„¤ì •"}),components:[(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ì¼ë°˜ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.ordinary`),(new ButtonBuilder).setLabel("ì…/í‡´ì¥ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.inout`),(new ButtonBuilder).setLabel("ê²½ê³  ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.warn`),(new ButtonBuilder).setLabel("ê³µì§€ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.notice`),(new ButtonBuilder).setLabel("ë ˆë²¨ë§ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.level`)),(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("í‹°ì¼“ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.ticket`),(new ButtonBuilder).setLabel("ë©¤ë²„ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${t}.config.member`))]}});export default MainPage;
var __awaiter=this&&this.__awaiter||function(e,d,a,r){return new(a=a||Promise)(function(t,n){function i(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof a?n:new a(function(e){e(n)})).then(i,o)}l((r=r.apply(e,d||[])).next())})};import{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,ChannelType}from"discord.js";import{color,url}from"../Config/EmbedConfig.js";import{GuildModel}from"../Database/GuildSchema.js";const OrdinaryPage=(n,i)=>__awaiter(void 0,void 0,void 0,function*(){var e=yield GuildModel.findOne({id:n.guild.id});let t=null==e?void 0:e.sysnoticechannel;return null!=e&&e.sysnoticechannel?n.guild.channels.fetch(null==e?void 0:e.sysnoticechannel).then(e=>{e?t=e.id:n.guild.channels.fetch().then(e=>{if(0!==e.size){let n=!1;e.forEach(e=>{n||e.type===ChannelType.GuildText&&(n=!0,t=e.id)})}})}):n.guild.channels.fetch().then(e=>{if(0!==e.size){let n=!1;e.forEach(e=>{n||e.type===ChannelType.GuildText&&(n=!0,t=e.id)})}}),{name:"ordinary",embed:(new EmbedBuilder).setColor(color).setAuthor({name:"ì‹œë±ì´",iconURL:url}).setTitle("ì¼ë°˜ ì„¤ì •").setDescription("ì¼ë°˜ì ì¸ ì„¤ì • ëª©ë¡ì…ë‹ˆë‹¤.").addFields({name:"ì‹œìŠ¤í…œ ë©”ì„¸ì§€ ê³µì§€ ì±„ë„",value:t?`<#${t}>`:"ë¯¸ì •"}),components:[(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ì‹œìŠ¤í…œ ê³µì§€ ì±„ë„ ì„¤ì •").setStyle(ButtonStyle.Primary).setCustomId(`cdec.${i}.config.execute.syschconfig`)),(new ActionRowBuilder).addComponents((new ButtonBuilder).setLabel("ë’¤ë¡œê°€ê¸°").setStyle(ButtonStyle.Danger).setCustomId(`cdec.${i}.config.main`))]}});export default OrdinaryPage;
var __awaiter=this&&this.__awaiter||function(n,c,r,u){return new(r=r||Promise)(function(i,t){function o(n){try{a(u.next(n))}catch(n){t(n)}}function e(n){try{a(u.throw(n))}catch(n){t(n)}}function a(n){var t;n.done?i(n.value):((t=n.value)instanceof r?t:new r(function(n){n(t)})).then(o,e)}a((u=u.apply(n,c||[])).next())})};const OutMsgConfig=(n,t)=>new Promise((n,t)=>__awaiter(void 0,void 0,void 0,function*(){}));export default OutMsgConfig;
var __awaiter=this&&this.__awaiter||function(e,d,a,r){return new(a=a||Promise)(function(t,n){function i(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof a?n:new a(function(e){e(n)})).then(i,o)}l((r=r.apply(e,d||[])).next())})};import{ChannelType}from"discord.js";import{GuildModel}from"../Database/GuildSchema.js";import OrdinaryPage from"./OrdinaryPage.js";const SysChConfig=(n,e)=>new Promise((d,e)=>__awaiter(void 0,void 0,void 0,function*(){var e;const i=OrdinaryPage;const o=null==(e=n.channel)?void 0:e.createMessageCollector({filter:e=>e.author.id===n.user.id,time:6e4}),l=yield null==(e=n.channel)?void 0:e.send("> ì œí•œì‹œê°„ 60ì´ˆ ì•ˆì— ì‹œìŠ¤í…œ ê³µì§€ ì±„ë„ë¡œ ì„¤ì •í•  ì±„ë„ì„ ë©˜ì…˜í•´ì£¼ì„¸ìš”. ì…ë ¥ ì·¨ì†ŒëŠ” `ã…ì·¨ì†Œ`ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");o.on("collect",t=>__awaiter(void 0,void 0,void 0,function*(){var e,n;"ã…ì·¨ì†Œ"===t.content?l&&(yield l.delete(),d(i)):t.content.startsWith("<#")&&(e=t.content.substring(2,t.content.length-1),n=yield null==(n=t.guild)?void 0:n.channels.fetch(e))?(null==n?void 0:n.type)!==ChannelType.GuildText?t.channel.send("í…ìŠ¤íŠ¸ ì±„ë„ì„ ì„ íƒí•´ì£¼ì„¸ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!"):(yield GuildModel.updateOne({id:t.guild.id},{sysnoticechannel:e}),l&&(yield l.delete()),yield t.channel.send(`ì„±ê³µì ìœ¼ë¡œ ì‹œìŠ¤í…œ ë©”ì„¸ì§€ ê³µì§€ ì±„ë„ì„ <#${n.id}>ìœ¼ë¡œ ë°”ê¿¨ì–´ìš”!`),null!==o&&void 0!==o&&o.stop(),d(i)):t.channel.send("ì…ë ¥ì´ ì˜ëª»ë˜ì—ˆì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!")}))}));export default SysChConfig;
var __awaiter=this&&this.__awaiter||function(e,d,a,r){return new(a=a||Promise)(function(t,n){function i(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof a?n:new a(function(e){e(n)})).then(i,o)}l((r=r.apply(e,d||[])).next())})};import{GuildModel}from"../Database/GuildSchema.js";import InOutPage from"./InOutPage.js";const InOutUserRoleConfig=(n,e)=>new Promise((d,e)=>__awaiter(void 0,void 0,void 0,function*(){var e;const i=InOutPage;const o=null==(e=n.channel)?void 0:e.createMessageCollector({filter:e=>e.author.id===n.user.id,time:6e4}),l=yield null==(e=n.channel)?void 0:e.send("> ì œí•œì‹œê°„ 60ì´ˆ ì•ˆì— ìë™ìœ¼ë¡œ ìœ ì €ì—ê²Œ ë¶€ì—¬í•  ì—­í• ì„ ë©˜ì…˜í•´ì£¼ì„¸ìš”. ì…ë ¥ ì·¨ì†ŒëŠ” `ã…ì·¨ì†Œ`ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");o.on("collect",t=>__awaiter(void 0,void 0,void 0,function*(){var e,n;"ã…ì·¨ì†Œ"===t.content?l&&(yield l.delete(),d(i)):t.content.startsWith("<@&")&&(e=t.content.substring(3,t.content.length-1),n=yield null==(n=t.guild)?void 0:n.roles.fetch(e))?(yield GuildModel.updateOne({id:t.guild.id},{userautorole:n.id}),l&&(yield l.delete()),yield t.delete(),yield t.channel.send(`ì„±ê³µì ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìœ ì €ì—ê²Œ ë¶€ì—¬í•  ì—­í• ì„ <@&${n.id}>ìœ¼ë¡œ ë°”ê¿¨ì–´ìš”!`),null!==o&&void 0!==o&&o.stop(),d(i)):t.channel.send("ì…ë ¥ì´ ì˜ëª»ë˜ì—ˆì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!")}))}));export default InOutUserRoleConfig;
var __awaiter=this&&this.__awaiter||function(n,r,a,s){return new(a=a||Promise)(function(t,o){function e(n){try{i(s.next(n))}catch(n){o(n)}}function c(n){try{i(s.throw(n))}catch(n){o(n)}}function i(n){var o;n.done?t(n.value):((o=n.value)instanceof a?o:new a(function(n){n(o)})).then(e,c)}i((s=s.apply(n,r||[])).next())})};import mongoose from"mongoose";const Connect=()=>new Promise((n,o)=>__awaiter(void 0,void 0,void 0,function*(){mongoose.connect(process.env.DBURL).then(()=>n()).catch(n=>o(n))}));export{Connect};
var __decorate=this&&this.__decorate||function(e,t,o,a){var d,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,a);else for(var p=e.length-1;0<=p;p--)(d=e[p])&&(i=(r<3?d(i):3<r?d(t,o,i):d(t,o))||i);return 3<r&&i&&Object.defineProperty(t,o,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};import typegoose from"@typegoose/typegoose";import{TicketClass}from"./TicketSchema.js";const{prop,getModelForClass}=typegoose;class GuildClass{}__decorate([prop({required:!0,unique:!0}),__metadata("design:type",String)],GuildClass.prototype,"id",void 0),__decorate([prop({required:!0,default:0}),__metadata("design:type",Number)],GuildClass.prototype,"warnlimit",void 0),__decorate([prop({required:!0,default:"[]"}),__metadata("design:type",String)],GuildClass.prototype,"userwarns",void 0),__decorate([prop({required:!0,default:"[]"}),__metadata("design:type",String)],GuildClass.prototype,"customdetection",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"sysnoticechannel",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"noticechannel",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"greetmsg",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"exitmsg",void 0),__decorate([prop({ref:()=>TicketClass}),__metadata("design:type",Object)],GuildClass.prototype,"ticketlist",void 0),__decorate([prop(),__metadata("design:type",Map)],GuildClass.prototype,"userlevels",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"inmsg",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"outmsg",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"userautorole",void 0),__decorate([prop(),__metadata("design:type",String)],GuildClass.prototype,"botautorole",void 0);const GuildModel=getModelForClass(GuildClass);export{GuildClass,GuildModel};
var __awaiter=this&&this.__awaiter||function(e,i,s,l){return new(s=s||Promise)(function(o,n){function t(e){try{c(l.next(e))}catch(e){n(e)}}function r(e){try{c(l.throw(e))}catch(e){n(e)}}function c(e){var n;e.done?o(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(t,r)}c((l=l.apply(e,i||[])).next())})};import pg from"pg";import logger from"../Utils/Logger.js";const{Pool,Client}=pg,Connect=()=>new Promise((o,e)=>__awaiter(void 0,void 0,void 0,function*(){var e;try{var n={connectionString:null==(e=process.env.DATABASE_URL)?void 0:e.replace("postgres","postgresql").concat("","?sslmode=require"),ssl:{rejectUnauthorized:!1}};new Client(n).connect(e=>{e?logger.error("Error Connecting: "+e.stack):(logger.info("Client connected"),o(!0))})}catch(e){}}));function getPool(){var e={connectionString:null==(e=process.env.DATABASE_URL)?void 0:e.replace("postgres","postgresql").concat("","?sslmode=require"),ssl:{rejectUnauthorized:!0}};return new Pool(e)}export{Connect,getPool};
var __decorate=this&&this.__decorate||function(e,t,o,r){var a,i=arguments.length,p=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(p=(i<3?a(p):3<i?a(t,o,p):a(t,o))||p);return 3<i&&p&&Object.defineProperty(t,o,p),p},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};import typegoose from"@typegoose/typegoose";const{prop,getModelForClass}=typegoose;class TicketClass{}__decorate([prop({required:!0}),__metadata("design:type",String)],TicketClass.prototype,"category",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],TicketClass.prototype,"title",void 0),__decorate([prop(),__metadata("design:type",String)],TicketClass.prototype,"description",void 0),__decorate([prop(),__metadata("design:type",String)],TicketClass.prototype,"buttontitle",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],TicketClass.prototype,"targetid",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],TicketClass.prototype,"shownroles",void 0);const TicketModel=getModelForClass(TicketClass);export{TicketClass,TicketModel};
var __decorate=this&&this.__decorate||function(e,t,o,r){var s,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;0<=l;l--)(s=e[l])&&(c=(a<3?s(c):3<a?s(t,o,c):s(t,o))||c);return 3<a&&c&&Object.defineProperty(t,o,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};import typegoose from"@typegoose/typegoose";const{prop,getModelForClass}=typegoose;class UserClass{}__decorate([prop({required:!0,unique:!0}),__metadata("design:type",String)],UserClass.prototype,"id",void 0);const UserModel=getModelForClass(UserClass);export{UserClass,UserModel};
var __decorate=this&&this.__decorate||function(e,t,o,r){var a,d=arguments.length,p=d<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(p=(d<3?a(p):3<d?a(t,o,p):a(t,o))||p);return 3<d&&p&&Object.defineProperty(t,o,p),p},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};import typegoose from"@typegoose/typegoose";const{prop,getModelForClass}=typegoose;class VoteClass{}__decorate([prop({required:!0}),__metadata("design:type",String)],VoteClass.prototype,"id",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],VoteClass.prototype,"topic",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],VoteClass.prototype,"msgid",void 0),__decorate([prop(),__metadata("design:type",String)],VoteClass.prototype,"description",void 0),__decorate([prop({required:!0,default:0}),__metadata("design:type",Number)],VoteClass.prototype,"agree",void 0),__decorate([prop({required:!0,default:0}),__metadata("design:type",Number)],VoteClass.prototype,"disagree",void 0),__decorate([prop({required:!0}),__metadata("design:type",Map)],VoteClass.prototype,"uservoted",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],VoteClass.prototype,"maker",void 0),__decorate([prop({required:!0}),__metadata("design:type",String)],VoteClass.prototype,"makername",void 0);const VoteModel=getModelForClass(VoteClass);export{VoteClass,VoteModel};
export default function parse(e,t){}
const imsibangpyeon=1;export{imsibangpyeon};
"use strict";



"use strict";
var __awaiter=this&&this.__awaiter||function(e,r,c,u){return new(c=c||Promise)(function(o,t){function n(e){try{a(u.next(e))}catch(e){t(e)}}function i(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(n,i)}a((u=u.apply(e,r||[])).next())})};import{SlashCommandBuilder}from"discord.js";import logger from"../Utils/Logger.js";const command={Builder:(new SlashCommandBuilder).setName("Template").setDescription("Template"),MsgExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("MsgExecute")}),SlashExecute:e=>__awaiter(void 0,void 0,void 0,function*(){logger.info("SlashExecute")})};export default command;
import dotenv from"dotenv";export default function Init(){dotenv.config()}
import winston from"winston";import winstonDaily from"winston-daily-rotate-file";const logDir="logs",{combine,timestamp,printf}=winston.format,logFormat=printf(o=>`${o.timestamp} ${o.level}: `+o.message),logger=winston.createLogger({format:combine(timestamp({format:"YYYY-MM-DD HH:mm:ss"}),logFormat),transports:[new winstonDaily({level:"info",datePattern:"YYYY-MM-DD",dirname:logDir,filename:"%DATE%.log",maxFiles:30,zippedArchive:!0}),new winstonDaily({level:"error",datePattern:"YYYY-MM-DD",dirname:logDir+"/error",filename:"%DATE%.error.log",maxFiles:30,zippedArchive:!0})]});logger.add(new winston.transports.Console({format:winston.format.combine(winston.format.colorize(),winston.format.simple())}));export default logger;